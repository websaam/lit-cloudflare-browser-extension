function dataURItoBlob(t){for(var e=atob(t.split(",")[1]),n=t.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(e.length),a=new Uint8Array(i),o=0;o<e.length;o++)a[o]=e.charCodeAt(o);return new Blob([i],{type:n})}async function onClickedUnlock(t){var e=JSON.parse(atob(t.getAttribute("data-lit")));const n=JSON.parse(atob(e.accessControlConditions)),i=dataURItoBlob(e.encryptedZip),a=buf2hex(new Uint8Array(atob(e.encryptedSymmetricKey).split(",").map(t=>parseInt(t)))),o=n[0].chain,r=await LitJsSdk.checkAndSignAuthMessage({chain:o}),d=await window.litNodeClient.getEncryptionKey({accessControlConditions:n,toDecrypt:a,chain:o,authSig:r}),c=await LitJsSdk.decryptZip(i,d),l=await c["string.txt"].async("text");if(null!=l&""!=l){console.log("Unlocked");const e=`https://iframe.videodelivery.net/${l}`;t.src=e,t.parentElement.classList.add("active")}}buf2hex=(t=>[...new Uint8Array(t)].map(t=>t.toString(16).padStart(2,"0")).join("")),[...document.getElementsByClassName("lit-video-wrapper")].forEach(t=>{var e=t.querySelector("iframe"),n=t.querySelector("button"),i=e.getAttribute("data-readable-conditions"),a=document.createElement("div");a.classList.add("lit-video-description");var o=document.createElement("div");o.classList.add("lit-video-overlay");var r=document.createElement("span");r.classList.add("lit-video-info"),r.innerText=i,t.insertBefore(o,e),t.appendChild(a),a.appendChild(n),a.appendChild(r),n.addEventListener("click",()=>onClickedUnlock(e)),t.addEventListener("click",()=>onClickedUnlock(e))});